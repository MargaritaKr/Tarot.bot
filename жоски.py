from telegram import Update, ReplyKeyboardMarkup, KeyboardButton
from telegram.ext import ApplicationBuilder, CommandHandler, MessageHandler, ContextTypes, filters
import random

phrases = [
    "Скорее всего, то что вы загадами, Вам не нужно.",
    "Это лучше уточнить при личном раскладе.",
    "Мой внутренний голос говорит: возможно.",
    "Точно не сегодня.",
    "Сейчас стоит думать о другом."
]

daily_card = [
    "Карта дня: Сила — сегодня твоя энергия может творить чудеса.",
    "Карта дня: Отшельник — стоит уединиться и подумать.",
    "Карта дня: Колесо Фортуны — будь готова к неожиданному повороту."
    "Карта дня: Императрица — сегодня стоит позаботиться о себе и близких.",
    "Карта дня: Маг — твоя сила в умении начать.",
    "Карта дня: Солнце — день светлый, бери от него максимум.",
    "Карта дня: Башня — возможны перемены, будь к ним готова.",
    "Карта дня: Шут — рискни, но не забывай про здравый смысл.",
    "Карта дня: Луна — доверяй интуиции, а не слухам.",
    "Карта дня: Справедливость — сегодня всё будет по заслугам.",
    "Карта дня: Влюблённые — сделай выбор сердцем.",
    "Карта дня: Жрец — ищи ответы в традициях или у наставника.",
    "Карта дня: Мир — заверши начатое и начни новое.",
    "Карта дня: Умеренность — Сегодняшний день благоприятен для поиска внутреннего баланса и гармонии. Старайся избегать крайностей в своих решениях и действиях, придерживаясь золотой середины. Умеренность поможет тебе сохранить энергию и избежать конфликтов, а также найти оптимальный подход к любым задачам.",
    "Карта дня: Дьявол — Сегодня ты можешь столкнуться с искушениями или зависимостями, которые будут испытывать твою силу воли. Будь внимателен к своим слабостям и не позволяй им взять над тобой верх. Возможно, пришло время осознать и проработать какие-то нездоровые привязанности или паттерны поведения.",
    "Карта дня: Повешенный — Сегодняшний день может потребовать от тебя нестандартного взгляда на привычные вещи. Возможно, придется чем-то пожертвовать или временно приостановить дела, чтобы увидеть ситуацию под новым углом. Это время для размышлений и переоценки ценностей, которое в итоге приведет к более глубокому пониманию.",
    "Карта дня: Смерть — Не пугайся этой карты, она символизирует не физическую смерть, а скорее трансформацию и завершение старого этапа. Сегодня могут произойти значительные перемены, которые освободят место для чего-то нового и лучшего. Будь готов отпустить прошлое и принять неизбежные изменения.",
    "Карта дня: Звезда — Сегодняшний день наполнен надеждой, вдохновением и оптимизмом. Верь в свои мечты и стремись к своим целям, даже если они кажутся далекими. Эта карта говорит о том, что ты находишься под благоприятным влиянием Вселенной, и твои усилия будут вознаграждены. Не упусти возможность зарядиться позитивной энергией.",
    "Карта дня: Суд — Сегодня наступило время подвести итоги и принять важное решение, основанное на честной оценке прошлого опыта. Возможно, тебе придется столкнуться с последствиями своих действий или принять ответственность за свои решения. Эта карта призывает к справедливости и объективности, а также к готовности двигаться вперед, освободившись от старых суждений.",
    "Карта дня: Мир — Сегодня ты можешь почувствовать ощущение завершенности и гармонии. Возможно, важный этап в твоей жизни подошел к концу, и ты достиг желаемого результата. Эта карта символизирует целостность, удовлетворение и возможность насладиться плодами своих трудов. Откройся новым горизонтам, имея за плечами ценный опыт.",
    "Карта дня: Колесница — Сегодняшний день требует от тебя решительности, целеустремленности и умения контролировать ситуацию. Сосредоточься на своих целях и смело двигайся вперед, преодолевая препятствия на своем пути. Эта карта говорит о необходимости взять бразды правления в свои руки и не позволять обстоятельствам сбить тебя с намеченного курса.",
    "Карта дня: Сила — Сегодня ты обладаешь огромной внутренней силой и уверенностью, которые помогут тебе справиться с любыми трудностями. Прояви свою стойкость и мужество, контролируя свои инстинкты и направляя свою энергию в нужное русло. Эта карта напоминает о важности самообладания и мягкого, но уверенного подхода к решению проблем.",
    "Карта дня: Двойка Жезлов — Сегодняшний день благоприятен для размышлений о своих планах и возможностях. Возможно, перед тобой стоит выбор или ты обдумываешь новые проекты. Взвесь все «за» и «против», проанализируй свои ресурсы и определи наиболее перспективное направление для дальнейшего развития.",
    "Карта дня: Тройка Жезлов — Сегодняшний день предвещает новые начинания и возможности для сотрудничества. Возможно, ты получишь интересное предложение или найдешь союзников для реализации своих идей. Будь открыт к новым контактам и не упусти шанс расширить свои горизонты."
]

future_card = [
    "Вас ждёт новое знакомство, не пропустите шанс.",
    "Скоро раскроется то, что долго было скрыто.",
    "Будущее — как карта: перемешано, но многое в ваших руках."
    "Неожиданная встреча, которая заставит тебя улыбнуться.",
    "В ближайшее время откроется новая возможность — не пропусти.",
    "Кто-то из прошлого напомнит о себе.",
    "Ждёт важный разговор, который всё расставит по местам.",
    "Время перемен: одни двери закроются, чтобы открылись другие.",
    "Пришло время выйти из зоны комфорта — и ты справишься.",
    "Возможно, тебя ждёт выбор, который многое изменит.",
    "Впереди — приятное событие, связанное с домом или семьёй.",
    "Путь будет тернист, но ты выйдешь из него сильнее.",
    "Ждёт урок, который стоит выучить — даже если сначала будет непросто.",
    "Тебя ждет неожиданное известие, которое может существенно повлиять на твои планы и заставить тебя пересмотреть некоторые из своих текущих целей. Будь готов к тому, что привычный ход событий может измениться, и прояви гибкость в адаптации к новым обстоятельствам.",
    "Впереди тебя ожидает период относительной стабильности и спокойствия. Это время благоприятно для того, чтобы навести порядок в делах, укрепить достигнутые позиции и насладиться плодами своих предыдущих усилий. Используй этот период для восстановления сил и подготовки к новым вызовам.",
    "Возможно, в ближайшее время тебе предстоит отправиться в небольшое путешествие или поездку, которая может быть связана как с работой, так и с личными делами. Эта поездка может принести новые впечатления, знакомства или полезный опыт.",
    "Кто-то из твоего окружения может нуждаться в твоей помощи, поддержке или совете. Будь внимателен к потребностям других людей и не отказывай в помощи, если она в твоих силах. Твоя поддержка может оказаться очень важной для кого-то.",
    "В ближайшее время перед тобой может открыться возможность реализовать свой давний замысел или проект, о котором ты давно мечтал. Не упусти этот шанс, прояви инициативу и настойчивость в достижении своей цели.",
    "Тебя ждет приятный сюрприз или неожиданный подарок, который поднимет тебе настроение и принесет радость. Это может быть что-то материальное или нематериальное, но оно обязательно вызовет у тебя положительные эмоции.",
    "Будь внимателен к знакам судьбы и мелочам, которые могут появляться на твоем пути. Иногда важные подсказки и ответы скрываются в самых неожиданных местах и событиях. Доверься своей интуиции и наблюдательности.",
    "В твоей жизни может появиться новый друг или единомышленник, с которым у тебя сложатся теплые и доверительные отношения. Это знакомство может оказаться очень ценным и принести в твою жизнь новые интересы и возможности.",
    "Возможно, в скором времени ты получишь признание своих заслуг или оценку своей работы. Это может выражаться как в словах благодарности, так и в более ощутимых формах поощрения. Насладись моментом и используй его как стимул для дальнейшего роста.",
    "Тебя ждет период обучения или получения новых знаний, которые могут быть связаны с твоей профессиональной деятельностью или личными интересами. Будь открыт к новой информации и используй эту возможность для своего развития.",
    "В твоей личной жизни могут произойти важные события, которые повлияют на твои отношения с близкими людьми. Это может быть как укрепление существующих связей, так и возникновение новых романтических чувств."
]

advice_card = [
    "Не принимай решений на эмоциях.",
    "Посмотри на ситуацию с другой стороны.",
    "Иногда стоит просто подождать."
    "Не сопротивляйся потоку — иногда лучше плыть, чем бороться.",
    "Прислушайся к себе: сердце уже знает, что делать.",
    "Не принимай решения в состоянии тревоги.",
    "Отпусти то, что не приносит радости — освободи место для нового.",
    "Сегодня — не лучший день для конфликта, выбери тишину.",
    "Позволь себе паузу: мудрые решения приходят в тишине.",
    "Вернись к тому, что вдохновляло тебя раньше.",
    "Обрати внимание на мелочи — в них ключ.",
    "Не бойся сказать «нет» — это тоже форма заботы.",
    "Делись добром — оно обязательно вернётся.",
    "Доверяй своим чувствам и интуиции, но не забывай анализировать ситуацию логически. Старайся найти баланс между эмоциональным восприятием и рациональным мышлением, чтобы принимать взвешенные решения.",
    "Будь открыт к новым идеям и предложениям, даже если на первый взгляд они кажутся необычными или рискованными. Иногда самые интересные возможности приходят неожиданно.",
    "Не стесняйся обращаться за помощью или советом к людям, которым ты доверяешь. Иногда взгляд со стороны может помочь увидеть ситуацию в новом свете и найти оптимальное решение.",
    "Сохраняй оптимистичный настрой, даже если сталкиваешься с трудностями. Вера в лучшее и позитивное мышление помогут тебе преодолеть препятствия и двигаться вперед.",
    "Удели достаточно времени своим близким и любимым людям. Поддерживай с ними теплые и доверительные отношения, ведь именно они являются твоей главной опорой.",
    "Заботься о своем физическом и ментальном здоровье. Правильное питание, регулярные упражнения и достаточный отдых помогут тебе сохранить энергию и хорошее настроение.",
    "Будь благодарен за все хорошее, что есть в твоей жизни. Чувство благодарности помогает ценить настоящее и привлекать еще больше позитивных событий.",
    "Не торопи события и не пытайся контролировать все вокруг. Иногда лучше дать вещам идти своим чередом и довериться естественному ходу событий.",
    "Прояви терпение и настойчивость в достижении своих целей. Успех часто приходит к тем, кто не сдается перед лицом трудностей и продолжает двигаться вперед.",
    "Найди время для отдыха и восстановления сил. Регулярные паузы помогут тебе избежать переутомления и сохранить ясность ума.",
    "Поверь в себя и свои возможности. У тебя есть все необходимое для того, чтобы справиться с любыми вызовами и достичь своих целей.",
    "Будь честен с собой и окружающими. Открытость и искренность помогут тебе построить доверительные отношения и избежать недоразумений.",
    "Сделай что-нибудь приятное для себя сегодня. Небольшой подарок или занятие, которое приносит тебе удовольствие, может значительно улучшить твое настроение и повысить мотивацию."
]

async def start(update: Update, context: ContextTypes.DEFAULT_TYPE):
    keyboard = [
        [KeyboardButton("Карта дня"), KeyboardButton("Что меня ждёт")],
        [KeyboardButton("Совет от карт"), KeyboardButton("Обратиться за личным раскладом")]
    ]
    reply_markup = ReplyKeyboardMarkup(keyboard, resize_keyboard=True)
    await update.message.reply_text(
        "Здравствуйте! Я бот, который отвечает на вопросы с помощью карт таро. Вы можете задать вопрос или выбрать одну из кнопок ниже.",
        reply_markup=reply_markup
    )

async def handle_message(update: Update, context: ContextTypes.DEFAULT_TYPE):
    user_text = update.message.text.lower()

    if user_text == "карта дня":
        await update.message.reply_text(random.choice(daily_card))
    elif user_text == "что меня ждёт":
        await update.message.reply_text(random.choice(future_card))
    elif user_text == "совет от карт":
        await update.message.reply_text(random.choice(advice_card))
    elif user_text == "обратиться за личным раскладом":
        await update.message.reply_text("Для личного расклада напишите мне: @Lilianatar.")
    elif user_text.endswith('?') and ('или' not in user_text):
        answer = random.choice(["Да", "Нет", "Определённо да", "Никак нет", "Карты говорят: да", "Карты говорят: нет"])
        await update.message.reply_text(answer)
    else:
        await update.message.reply_text(random.choice(phrases))

TOKEN = "7482250076:AAERcS6y3MiMFubEYOMQCEJzfWmkdqX8w-M"
app = ApplicationBuilder().token(TOKEN).build()

app.add_handler(CommandHandler("start", start))
app.add_handler(MessageHandler(filters.TEXT & ~filters.COMMAND, handle_message))

app.run_polling()